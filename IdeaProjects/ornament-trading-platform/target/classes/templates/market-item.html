<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!--使用th:block标签将公共css文件引入-->
    <th:block th:replace="common :: common-css"></th:block>
    <link rel="stylesheet" th:href="@{/dist/css/main.css}">
</head>
<body>
<div class="page">
    <!--引入公共部分-->
    <div th:replace="common :: #tablerx"></div>
    <div class="page-wrapper">
        <div class="container-xl">
            <!-- Page title -->
            <div class="page-header d-print-none">
                <div class="row g-2 align-items-center">
                    <div class="col">
                        <h2 class="page-title">
                            Market Items
                        </h2>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-body">
            <div class="container-xl">
                <div class="card market-list">
                    <div class="ribbon ribbon-top bg-yellow">
                        <!-- Download SVG icon from http://tabler-icons.io/i/star -->
                        <!--icon-filled-->
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-heart" width="24"
                             height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                             stroke-linecap="round" stroke-linejoin="round">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                            <path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"></path>
                        </svg>
                    </div>
                    <div class="l_Layout">
                        <div class="detail-header black">
                            <div class="detail-pic">
                                <div style="width:269px" class="t_Center"><img
                                        src=""
                                        style="max-width:269px;max-height:176px;"></div>
                                <div class="detail-pic-cover"></div>
                            </div>
                            <div class="detail-cont">
                                <div class="ornament-name">
                                    <!--                                    <h1>AK-47 | 可燃冰 (久经沙场)</h1>-->
                                </div>
                                <p>
                                    <!--                                    <span><label>品质 |</label>保密</span>-->
                                    <!--                                    <span><label>类别 |</label>普通</span>-->
                                    <!--                                    <span><label>类型 |</label>步枪</span>-->
                                </p>
                                <div class="blank20"></div>
                                <div class="line"></div>
                                <div class="blank20"></div>
                                <div class="detail-summ">
                                    <div class="l_Right">
                                        <a
                                                href="https://buff.163.com/market/steam_inventory?game=csgo#page_num=1&amp;search=AK-47%20|%20%E5%8F%AF%E7%87%83%E5%86%B0%20(%E4%B9%85%E7%BB%8F%E6%B2%99%E5%9C%BA)&amp;state=cansell"
                                                class="btn  btn-outline-secondary">我要出售</a>
                                    </div>
                                    <span> <label>参考价格 |</label> <strong
                                            class="f_Strong">¥ <big>144.52</big></strong></span>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <!--d-none-->
                            <div class="form-selectgroup exterior-form-selectgroup">
                                <label class="form-selectgroup-item">
                                    <input type="radio" name="icons" value="home" class="form-selectgroup-input btn">
                                    <span class="form-selectgroup-label"><!-- Download SVG icon from http://tabler-icons.io/i/home -->
                                        <!-- SVG icon code with class="me-1" -->
        崭新出厂 ¥ 325</span>
                                </label>
                                <label class="form-selectgroup-item">
                                    <input type="radio" name="icons" value="user" class="form-selectgroup-input">
                                    <span class="form-selectgroup-label"><!-- Download SVG icon from http://tabler-icons.io/i/user -->
                                        <!-- SVG icon code with class="me-1" -->
        略有磨损 ¥ 224</span>
                                </label>
                                <label class="form-selectgroup-item">
                                    <input type="radio" name="icons" value="circle" class="form-selectgroup-input">
                                    <span class="form-selectgroup-label"><!-- Download SVG icon from http://tabler-icons.io/i/circle -->
                                        <!-- SVG icon code with class="me-1" -->
        久经沙场 ¥ 120</span>
                                </label>
                                <label class="form-selectgroup-item">
                                    <input type="radio" name="icons" value="square" class="form-selectgroup-input">
                                    <span class="form-selectgroup-label"><!-- Download SVG icon from http://tabler-icons.io/i/square -->
                                        <!-- SVG icon code with class="me-1" -->
        破损不堪 ¥ 112</span>
                                </label>
                                <label class="form-selectgroup-item">
                                    <input type="radio" name="icons" value="square" class="form-selectgroup-input">
                                    <span class="form-selectgroup-label"><!-- Download SVG icon from http://tabler-icons.io/i/square -->
                                        <!-- SVG icon code with class="me-1" -->
        战痕累累 ¥ 79</span>
                                </label>
                            </div>
                            <div class="blank20"></div>
                            <div class="market-header">
                                <div class="cont-tab">
                                    <div class="blank6"></div>
                                    <ul class="new-tab">
                                        <li class="selling on">
                                            <a href="javascript:void(0);">当前在售(1000+)
                                                <i class="icon icon_top_cur"></i>
                                            </a>
                                        </li>
                                        <li class="buying"><a href="javascript:;">当前求购(<span id="buy_num">193</span>)<i
                                                class="icon icon_top_cur"></i></a></li>
                                        <li class="user-preview"><a href="javascript:;">玩家秀(<span id="user_show_count">1000+</span>)<i
                                                class="icon icon_top_cur"></i></a></li>
                                        <li class="history"><a href="javascript:;">成交记录<i class="icon icon_top_cur"></i></a>
                                        </li>
                                        <li class="price-chart"><a href="javascript:;">价格趋势<i
                                                class="icon icon_top_cur"></i></a></li>
                                        <li class="paintwear-rank"><a href="javascript:;">磨损排行<i
                                                class="icon icon_top_cur"></i></a></li>
                                        <li class="related"><a href="javascript:;">相关推荐<i class="icon icon_top_cur"></i></a>
                                        </li>
                                    </ul>
                                    <div class="clear"></div>
                                    <div class="hr-text text-primary" style="margin: 0rem 0;">Primary divider</div>
                                </div>
                                <div class="criteria d-flex justify-content-between" id="asset_tag-filter"
                                     style="padding-bottom: 6px; min-height: 43px; margin-left: 20px;">
                                    <div class="d-flex">
                                        <div class="mb-3" id="grindZone">
                                            <!--                                            <button data-bs-toggle="dropdown" type="button"-->
                                            <!--                                                    class="btn dropdown-toggle-split" onclick="wearZone()">磨损区间-->
                                            <!--                                            </button>-->
                                            <!--                                            <div class="dropdown-menu wear-zone">-->
                                            <!--                                                <a class="w-50 dropdown-item" href="javascript:void(0)">-->
                                            <!--                                                    不限-->
                                            <!--                                                </a>-->
                                            <!--                                                <a class="w-50 dropdown-item" href="javascript:void(0)">-->
                                            <!--                                                    0.15-0.18-->
                                            <!--                                                </a>-->
                                            <!--                                                <a class="w-50 dropdown-item" href="javascript:void(0)">-->
                                            <!--                                                    0.18-0.21-->
                                            <!--                                                </a>-->
                                            <!--                                                <a class="w-50 dropdown-item" href="javascript:void(0)">-->
                                            <!--                                                    0.21-0.24-->
                                            <!--                                                </a>-->
                                            <!--                                                <a class="w-50 dropdown-item" href="javascript:void(0)">-->
                                            <!--                                                    0.24-0.27-->
                                            <!--                                                </a>-->
                                            <!--                                                <a class="w-50 dropdown-item" href="javascript:void(0)">-->
                                            <!--                                                    0.27-0.38-->
                                            <!--                                                </a>-->
                                            <!--                                            </div>-->
                                        </div>
                                    </div>
                                    <div class="">
                                        <div class="mb-3" id="conditionZone">
                                            <button data-bs-toggle="dropdown" type="button" class="btn"
                                                    onclick="conditionZone()">默认
                                            </button>
                                            <div class="dropdown-menu condition-zone" id="condition-zone">
                                                <a class="w-50 dropdown-item" href="javascript:void(0)">
                                                    默认
                                                </a>
                                                <a class="w-50 dropdown-item" href="javascript:void(0)">
                                                    价格↑
                                                </a>
                                                <a class="w-50 dropdown-item" href="javascript:void(0)">
                                                    价格↓
                                                </a>
                                                <a class="w-50 dropdown-item" href="javascript:void(0)">
                                                    磨损度↑
                                                </a>
                                                <a class="w-50 dropdown-item" href="javascript:void(0)">
                                                    磨损度↓
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="detail-tab-cont">


                                <table class="list_tb" width="100%" id="market-selling-list">
                                    <tbody class="list_tb_csgo">
                                    <tr>
                                        <th width="20"></th>
                                        <th width="100">饰品</th>
                                        <th style="min-width: 100px;" class="t_Left">
                                            <span>磨损度<i class="icon icon_order"></i></span>
                                        </th>
                                        <th style="min-width: 120px;" class="t_Left">
                                            <span>卖家<i class="icon icon_order"></i></span>
                                        </th>
                                        <th style="min-width: 100px;" class="t_Left">
                                            <span>价格<i class="icon icon_order"></i></span>
                                        </th>
                                        <th width="220" class="t_Left">操作</th>
                                    </tr>
                                    <!--                                    <tr class="selling">-->
                                    <!--                                        <td></td>-->
                                    <!--                                        <td class="img_td">-->
                                    <!--                                            <div class="pic-cont item-detail-img"-->
                                    <!--                                                 style="display: flex;background-image: url(https://buff.163.com/static/images/item_bg.png); background-position:center;">-->
                                    <!--                                                <img class=""-->
                                    <!--                                                     src="https://g.fp.ps.netease.com/market/file/62bf786422c75fb06a7a4490RFMGtUvd04"-->
                                    <!--                                                     width="72" height="48"-->
                                    <!--                                                     style="object-fit:contain;  max-width:80%; margin:auto;max-height:80% ">-->
                                    <!--                                            </div>-->
                                    <!--                                        </td>-->
                                    <!--                                        <td class="t_Left">-->
                                    <!--                                            <div class="name-cont wear">-->
                                    <!--                                                <div class="csgo_value">-->
                                    <!--                                                    <div class="wear-value">磨损: 0.3116597831249237</div>-->
                                    <!--                                                    <div class="wear-pointer">-->
                                    <!--                                                        <div class="wear-pointer-icon"-->
                                    <!--                                                             style="left: 31.16597831249237%"></div>-->
                                    <!--                                                    </div>-->
                                    <!--                                                    <div class="progress" style="margin-bottom: 5px;">-->
                                    <!--                                                        <div class="progress-bar progress-bar-fn" style="width: 7%;"-->
                                    <!--                                                             title="崭新出厂"></div>-->
                                    <!--                                                        <div class="progress-bar progress-bar-success"-->
                                    <!--                                                             style="width: 8%;"-->
                                    <!--                                                             title="略有磨损"></div>-->
                                    <!--                                                        <div class="progress-bar progress-bar-warning"-->
                                    <!--                                                             style="width: 23%;"-->
                                    <!--                                                             title="久经沙场"></div>-->
                                    <!--                                                        <div class="progress-bar progress-bar-danger" style="width: 7%;"-->
                                    <!--                                                             title="破损不堪"></div>-->
                                    <!--                                                        <div class="progress-bar progress-bar-bs" style="width: 55%;"-->
                                    <!--                                                             title="战痕累累"></div>-->
                                    <!--                                                    </div>-->
                                    <!--                                                </div>-->
                                    <!--                                            </div>-->
                                    <!--                                        </td>-->
                                    <!--                                        <td class="t_Left ">-->
                                    <!--                                            <a href="https://buff.163.com/shop/U1098449711?store_game=csgo"-->
                                    <!--                                               class="j_shoptip_handler">-->
                                    <!--                                                <img src=""-->
                                    <!--                                                     width="30" height="30" class="user-thum">-->
                                    <!--                                                给我内格夫-->
                                    <!--                                            </a>-->
                                    <!--                                        </td>-->
                                    <!--                                        <td class="t_Left">-->
                                    <!--                                            <div style="display: table-cell;">-->
                                    <!--                                                <strong class="f_Strong">11</strong>-->
                                    <!--                                                <p class="hide-cny"><span class="c_Gray f_12px">(¥ 119.9)</span></p>-->
                                    <!--                                            </div>-->
                                    <!--                                            <div style="display: table-cell; vertical-align: middle; padding-left: 3px;">-->
                                    <!--                                                <i class="icon icon_payment_alipay" style="margin-top:-3px;"-->
                                    <!--                                                   title="支持BUFF余额-支付宝"></i>-->
                                    <!--                                                <i class="icon icon_payment_others" style="margin-top:-3px;"-->
                                    <!--                                                   title="支持BUFF余额-银行卡"></i>-->
                                    <!--                                            </div>-->
                                    <!--                                        </td>-->
                                    <!--                                        <td class="t_Left">-->
                                    <!--                                            <a href="" class="i_Btn i_Btn_mid2 btn-buy-order">购买</a>-->
                                    <!--                                        </td>-->
                                    <!--                                    </tr>-->
                                    </tbody>
                                </table>
                                <div class="pager list-pager light-theme simple-pagination">
                                    <ul>
                                        <li class="disabled"><span class="current prev">上一页</span></li>
                                        <li class="active"><span class="current">1</span></li>
                                        <li><a href="https://buff.163.com/goods/900514#page_num=2"
                                               class="page-link">2</a></li>
                                        <li><a href="https://buff.163.com/goods/900514#page_num=3"
                                               class="page-link">3</a></li>
                                        <li><a href="https://buff.163.com/goods/900514#page_num=4"
                                               class="page-link">4</a></li>
                                        <li><a href="https://buff.163.com/goods/900514#page_num=5"
                                               class="page-link">5</a></li>
                                        <li><a href="https://buff.163.com/goods/900514#page_num=6"
                                               class="page-link">6</a></li>
                                        <li><a href="https://buff.163.com/goods/900514#page_num=7"
                                               class="page-link">7</a></li>
                                        <li><a href="https://buff.163.com/goods/900514#page_num=8"
                                               class="page-link">8</a></li>
                                        <li><a href="https://buff.163.com/goods/900514#page_num=9"
                                               class="page-link">9</a></li>
                                        <li><a href="https://buff.163.com/goods/900514#page_num=10"
                                               class="page-link">10</a></li>
                                        <li><a href="https://buff.163.com/goods/900514#page_num=2"
                                               class="page-link next">下一页</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="footer footer-transparent d-print-none">
                <div class="container-xl">
                    <div class="row text-center align-items-center flex-row-reverse">
                        <div class="col-lg-auto ms-lg-auto">
                            <ul class="list-inline list-inline-dots mb-0">
                                <li class="list-inline-item"><a href="./docs/index.html" class="link-secondary">Documentation</a>
                                </li>
                                <li class="list-inline-item"><a href="./license.html" class="link-secondary">License</a>
                                </li>
                                <li class="list-inline-item"><a href="https://github.com/tabler/tabler" target="_blank"
                                                                class="link-secondary" rel="noopener">Source code</a>
                                </li>
                                <li class="list-inline-item">
                                    <a href="https://github.com/sponsors/codecalm" target="_blank"
                                       class="link-secondary" rel="noopener">
                                        <!-- Download SVG icon from http://tabler-icons.io/i/heart -->
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                             class="icon text-pink icon-filled icon-inline" width="24" height="24"
                                             viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                             stroke-linecap="round" stroke-linejoin="round">
                                            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                            <path d="M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"/>
                                        </svg>
                                        Sponsor
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-12 col-lg-auto mt-3 mt-lg-0">
                            <ul class="list-inline list-inline-dots mb-0">
                                <li class="list-inline-item">
                                    Copyright &copy; 2022
                                    <a href="." class="link-secondary">Tabler</a>.
                                    All rights reserved.
                                </li>
                                <li class="list-inline-item">
                                    <a href="./changelog.html" class="link-secondary" rel="noopener">
                                        v1.0.0-beta10
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>
</div>
<div class="modal modal-blur fade" id="modal-simple" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">确认支付</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="popup-cont">
                    <div class="plus-card" id="ul-container" style="display:none">
                        <ul>
                            <li class="on"></li>
                        </ul>
                    </div>
                    <div class="epay">
                        <div class="scope-count t_Center c_Gray">应付 <strong class="total_price">¥ 21.4</strong><span
                                class="hide-cny c_Gray f_16px">&nbsp;(<span class="total_price_custom">¥ 21.4</span>)</span></div>
                        <div class="blank20"></div>
                        <h4 class="c_Gray">选择支付方式</h4>
                        <ul class="pay-method-list" style="height: 320px; overflow: hidden;">
                            <li class="pay-item on" data-value="3" style="cursor: pointer;">
                                <img src="https://g.fp.ps.netease.com/market/file/5cc1640c8b74270c86e38b68FHsfPgqS02"
                                     width="40">
                                <div>
                                    <h5 class="f_16px ms-3">BUFF余额-支付宝 <span class="c_Blue"><!--¥ 39.05--></span><span
                                            class="tag tag_recommand">推荐</span></h5>
                                </div>
                                <i class="icon icon_checkbox_big"></i>
                                <div class="scope-line"></div>
                            </li>
                            <li class="unselectable-pay-item" data-value="10" style="cursor: pointer;">
                                <img src="https://g.fp.ps.netease.com/market/file/5e0087d17f9d2a431d90b1b3VBOMXPig02"
                                     width="40">
                                <div>
                                    <h5 class="f_16px ms-3">支付宝-信用卡花呗 </h5>
                                    <p class="c_Gray ms-3">1%服务费</p>
                                </div>
                                <i class="icon icon_checkbox_big"></i>
                                <div class="scope-line"></div>
                            </li>
                            <li class="unselectable-pay-item" data-value="1" style="cursor: pointer;">
                                <img src="https://g.fp.ps.netease.com/market/file/5d89d73f8b742797d6c15542cjwxkihM02"
                                     width="40">
                                <div>
                                    <h5 class="f_16px ms-3">BUFF余额-银行卡 <span class="c_Blue">¥ 14.28</span></h5>
                                    <p class="ms-3" style="color: #EEA20E">余额不足</p>
                                </div>
                                <i class="icon icon_checkbox_big"></i>
                                <div class="scope-line"></div>
                            </li>
                            <li class="unselectable-pay-item" data-value="6" style="cursor: pointer;">
                                <img src="https://g.fp.ps.netease.com/market/file/5cc1647c5e6027b3d1dda549i5ViL5mH02"
                                     width="40">
                                <div>
                                    <h5 class="f_16px ms-3">微信支付 </h5>
                                </div>
                                <i class="icon icon_checkbox_big"></i>
                                <div class="scope-line"></div>
                            </li>
                        </ul>
                    </div>
                    <div class="coupon-container">
                    </div>
                    <div class="t_Center">
                        <a href="javascript:void(0)" class="i_Btn pay-btn">确认付款</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Libs JS -->
<!-- Tabler Core -->
<th:block th:replace="common :: #common-scripts"></th:block>
</body>
</html>
<script th:src="@{/jquery/jquery-3.6.0.min.js}"></script>
<script>
    var currentPage = 1;
    var wearZoneParam = "";
    var conditionZoneParam = "";
    var goodsIdForExterior = [[${goodsId}]];
    function askForData(pageNum, wearZone, conditionZone) {
        $.ajax({
            url: "/api/goods/" + goodsIdForExterior,
            type: "GET",
            // data表示发送的数据
            data: {
                pageNum: pageNum,
                pageSize: 5,
                wearZone: wearZone,
                conditionZone: conditionZone
            },
            // 定义发送请求的数据格式为JSON字符串
            contentType: "application/json;charset=UTF-8",
            //定义回调响应的数据格式为JSON字符串，该属性可以省略
            dataType: "json",
            //成功响应的结果
            success: function (data) {
                if (data.code == 200) {
                    console.log(data);
                    render(data);
                }
            }
        })
    }
    function askForExteriorData(name){
        $.ajax({
            url: "/api/goods/getEveryExteriorGoods",
            type: "GET",
            // data表示发送的数据
            data: {
                name: name
            },
            // 定义发送请求的数据格式为JSON字符串
            contentType: "application/json;charset=UTF-8",
            //定义回调响应的数据格式为JSON字符串，该属性可以省略
            dataType: "json",
            //成功响应的结果
            success: function (data) {
                if (data.code == 200) {
                    console.log(data);
                    var allExteriorSpan = $(".exterior-form-selectgroup span")
                    for (let i = 0; i <  allExteriorSpan.length; i++) {
                        allExteriorSpan[i].setAttribute("onclick",'toGoodsExterior('+data.data[i].goods_id+')')
                        allExteriorSpan[i].innerText = data.data[i].name + ' ￥ ' + data.data[i].price
                    }
                }
            }
        })
    }
    window.onload = function () {
        askForData(1)
    };

    function toGoodsExterior(goodsId){
        goodsIdForExterior = goodsId;
        $.ajax({
            url: "/api/goods/" + goodsId,
            type: "GET",
            // data表示发送的数据
            data: {
                pageNum: 1,
                pageSize: 5
            },
            // 定义发送请求的数据格式为JSON字符串
            contentType: "application/json;charset=UTF-8",
            //定义回调响应的数据格式为JSON字符串，该属性可以省略
            dataType: "json",
            //成功响应的结果
            success: function (data) {
                if (data.code == 200) {
                    console.log(data);
                    render(data);
                }
            }
        })
    }
    function renderWeaponcase(data){
        conditionZoneParam = data.conditionZone;
        console.log($(".exterior-form-selectgroup"))
        $(".exterior-form-selectgroup")[0].style = 'display:none;'
        var dataList = data.data.list;
        var sellDataLength = dataList.length;
        var detailInfo = dataList[0];
        if (!(dataList.length > 0)) {
            $(".list_tb_csgo")[0].innerHTML = '<tr>\n' +
                '                                        <th width="20"></th>\n' +
                '                                        <th width="100">饰品</th>\n' +
                '                                        <th style="min-width: 120px;" class="t_Left">\n' +
                '                                            <span>卖家<i class="icon icon_order"></i></span>\n' +
                '                                        </th>\n' +
                '                                        <th style="min-width: 100px;" class="t_Left">\n' +
                '                                            <span>价格<i class="icon icon_order"></i></span>\n' +
                '                                        </th>\n' +
                '                                        <th width="220" class="t_Left">操作</th>\n' +
                '                                    </tr>';
            $('.new-tab .selling>a')[0].innerText = '当前在售(0)';
            $('.simple-pagination ul')[0].innerHTML = '';
            return false;
        }
        var iconUrl = detailInfo.iconUrl
        var ornamentName = detailInfo.name;
        var rarity = detailInfo.rarityLocalizedName;
        var quality = detailInfo.qualityLocalizedName;
        var type = detailInfo.typeLocalizedName;
        var price = detailInfo.price;
        $(".detail-header img")[0].src = iconUrl;
        $(".detail-cont > .ornament-name")[0].innerHTML = '<h1>' + ornamentName + '</h1>';
        $(".detail-cont > p")[0].innerHTML = '<span><label>品质 |</label>' + rarity + '</span>\n' +
            '                  <span><label>类别 |</label>' + quality + '</span>\n' +
            '                  <span><label>类型 |</label>' + type + '</span>';
        $(".detail-cont .f_Strong big")[0].innerText = price;
        $('.new-tab .selling>a')[0].innerText = '当前在售(' + sellDataLength + ')';
        var tableSellDataStr = "";
        $("#condition-zone")[0].innerHTML = '<a class="w-50 dropdown-item" href="javascript:void(0)">\n' +
            '                                                    默认\n' +
            '                                                </a>\n' +
            '                                                <a class="w-50 dropdown-item" href="javascript:void(0)">\n' +
            '                                                    价格↑\n' +
            '                                                </a>\n' +
            '                                                <a class="w-50 dropdown-item" href="javascript:void(0)">\n' +
            '                                                    价格↓\n' +
            '                                                </a>\n';
        tableSellDataStr += '<tr>\n' +
            '                                        <th width="20"></th>\n' +
            '                                        <th width="100">饰品</th>\n' +
            '                                        <th style="min-width: 100px;" class="t_Left">\n' +
            '                                            <span>名称<i class="icon icon_order"></i></span>\n' +
            '                                        </th>\n' +
            '                                        <th style="min-width: 120px;" class="t_Left">\n' +
            '                                            <span>卖家<i class="icon icon_order"></i></span>\n' +
            '                                        </th>\n' +
            '                                        <th style="min-width: 100px;" class="t_Left">\n' +
            '                                            <span>价格<i class="icon icon_order"></i></span>\n' +
            '                                        </th>\n' +
            '                                        <th width="220" class="t_Left">操作</th>\n' +
            '                                    </tr>'
        for (let i = 0; i < sellDataLength; i++) {
            tableSellDataStr += '<tr class="selling"><td></td>\n' +
                '                                        <td class="img_td">\n' +
                '                                            <div class="pic-cont item-detail-img"\n' +
                '                                                 style="display: flex;background-image: url(https://buff.163.com/static/images/item_bg.png); background-position:center;">\n' +
                '                                                <img class=""\n' +
                '                                                     src="' + dataList[i].iconUrl + '"\n' +
                '                                                     width="72" height="48"\n' +
                '                                                     style="object-fit:contain;  max-width:80%; margin:auto;max-height:80% ">\n' +
                '                                            </div>\n' +
                '                                        </td>\n' +
                '                                        <td class="t_Left">\n' +
                '                                            <div class="name-cont wear">\n' +
                '                                                <div class="csgo_value">\n' +
                '                                                   <h3 class="show_sticker_false"><span class="textOne">'+ dataList[i].name +'</span></h3>\n' +
                '                                                </div>\n' +
                '                                            </div>\n' +
                '                                        </td>\n' +
                '                                        <td class="t_Left ">\n' +
                '                                            <a href="javascript:void(0)"\n' +
                '                                               class="j_shoptip_handler">\n' +
                '                                                <img src="' + dataList[i].avatar + '"\n' +
                '                                                     width="30" height="30" class="user-thum">\n' +
                '                                                ' + dataList[i].nickname + '\n' +
                '                                            </a>\n' +
                '                                        </td>\n' +
                '                                        <td class="t_Left">\n' +
                '                                            <div style="display: table-cell;">\n' +
                '                                                <strong class="f_Strong">￥' + dataList[i].price + '</strong>\n' +
                '                                                <p class="hide-cny"><span class="c_Gray f_12px">(￥' + dataList[i].price + ')</span></p>\n' +
                '                                            </div>\n' +
                '                                            <div style="display: table-cell; vertical-align: middle; padding-left: 3px;">\n' +
                '                                                <i class="icon icon_payment_alipay" style="margin-top:-3px;"\n' +
                '                                                   title="支持BUFF余额-支付宝"></i>\n' +
                '                                                <i class="icon icon_payment_others" style="margin-top:-3px;"\n' +
                '                                                   title="支持BUFF余额-银行卡"></i>\n' +
                '                                            </div>\n' +
                '                                        </td>\n' +
                '                                        <td class="t_Left">\n' +
                '                                            <a href="javascript:void(0)" class="i_Btn i_Btn_mid2 btn-buy-order" data-bs-toggle="modal" data-bs-target="#modal-simple">购买</a>\n' +
                '                                        </td>\n' +
                '                                    </tr>'
        }
        $(".list_tb_csgo")[0].innerHTML = tableSellDataStr;
        var pageInfo = data.data;
        var pageDataStr = ""
        if (pageInfo.isFirstPage)
            pageDataStr += '<li class="disabled"><span class="current prev">上一页</span></li>'
        else
            pageDataStr += '<li><a href="javascript:void(0)" onclick="toPageNum(' + pageInfo.prePage + ')" class="page-link prev">上一页</a></li>'

        for (let currentPageNum = 1; currentPageNum <= pageInfo.navigatepageNums.length; currentPageNum++) {
            if (pageInfo.pageNum == currentPageNum) {
                currentPage = currentPageNum;
                pageDataStr += '<li class="active"><span class="current">' + currentPageNum + '</span></li>';
            } else
                pageDataStr += '<li><a href="javascript:void(0)" onclick="toPageNum(' + currentPageNum + ')" className="page-link">' + currentPageNum + '</a></li>'
        }
        if (pageInfo.isLastPage)
            pageDataStr += '<li class="disabled"><span class="current next">下一页</span></li>'
        else
            pageDataStr += '<li><a href="javascript:void(0)" onclick="toPageNum(' + pageInfo.nextPage + ')" class="page-link next">下一页</a></li>'
        $('.simple-pagination ul')[0].innerHTML = pageDataStr;
    }

    function render(data) {
        wearZoneParam = data.wearZone;
        conditionZoneParam = data.conditionZone;
        var keyword = data.keyword;
        var dataList = data.data.list;
        var sellDataLength = dataList.length;
        var detailInfo = dataList[0];
        if (!(dataList.length > 0)) {
            $(".list_tb_csgo")[0].innerHTML = '<tr>\n' +
                '                                        <th width="20"></th>\n' +
                '                                        <th width="100">饰品</th>\n' +
                '                                        <th style="min-width: 100px;" class="t_Left">\n' +
                '                                            <span>磨损度<i class="icon icon_order"></i></span>\n' +
                '                                        </th>\n' +
                '                                        <th style="min-width: 120px;" class="t_Left">\n' +
                '                                            <span>卖家<i class="icon icon_order"></i></span>\n' +
                '                                        </th>\n' +
                '                                        <th style="min-width: 100px;" class="t_Left">\n' +
                '                                            <span>价格<i class="icon icon_order"></i></span>\n' +
                '                                        </th>\n' +
                '                                        <th width="220" class="t_Left">操作</th>\n' +
                '                                    </tr>';
            $('.new-tab .selling>a')[0].innerText = '当前在售(0)';
            $('.simple-pagination ul')[0].innerHTML = '';
            return false;
        }
        var iconUrl = detailInfo.iconUrl
        var ornamentName = detailInfo.name;
        var rarity = detailInfo.rarityLocalizedName;
        var quality = detailInfo.qualityLocalizedName;
        var type = detailInfo.typeLocalizedName;
        var price = detailInfo.price;
        if (type == "武器箱" || type == "印花") {
            renderWeaponcase(data);
            return;
        }
        askForExteriorData(ornamentName.substring(0, ornamentName.lastIndexOf("(")))
        $(".detail-header img")[0].src = iconUrl;
        $(".detail-cont > .ornament-name")[0].innerHTML = '<h1>' + ornamentName + '</h1>';
        $(".detail-cont > p")[0].innerHTML = '<span><label>品质 |</label>' + rarity + '</span>\n' +
            '                  <span><label>类别 |</label>' + quality + '</span>\n' +
            '                  <span><label>类型 |</label>' + type + '</span>';
        $(".detail-cont .f_Strong big")[0].innerText = price;
        var exteriorLabel = $(".form-selectgroup .form-selectgroup-label");
        for (let i = 0; i < exteriorLabel.length; i++) {
            if (exteriorLabel[i].innerText.indexOf(keyword) != -1) {
                exteriorLabel[i].previousElementSibling.checked = true;
                exteriorLabel[i].innerText = keyword + ' ￥' + price;
            }
        }
        var paintwear = [];
        if (keyword == "崭新出厂") {
            paintwear = [
                "0.00-0.01",
                "0.01-0.02",
                "0.02-0.03",
                "0.03-0.04",
                "0.04-0.07",
            ]
        }else if(keyword == "略有磨损") {
            paintwear = [
                "0.07-0.08",
                "0.08-0.09",
                "0.09-0.10",
                "0.10-0.11",
                "0.11-0.15",
            ]
        }else if (keyword == "久经沙场") {
            paintwear = [
                "0.15-0.18",
                "0.18-0.21",
                "0.21-0.24",
                "0.24-0.27",
                "0.27-0.38",
            ]
        }else if (keyword == "破损不堪") {
            paintwear = [
                "0.38-0.39",
                "0.39-0.40",
                "0.40-0.41",
                "0.41-0.42",
                "0.42-0.45",
            ]
        }else if (keyword == "战痕累累") {
            paintwear = [
                "0.45-0.50",
                "0.50-0.63",
                "0.63-0.76",
                "0.76-0.90",
                "0.90-1.00",
            ]
        }
        wearZoneForEachPaintWear(paintwear)
        $('.new-tab .selling>a')[0].innerText = '当前在售(' + sellDataLength + ')';
        var tableSellDataStr = "";
        tableSellDataStr += '<tr>\n' +
            '                                        <th width="20"></th>\n' +
            '                                        <th width="100">饰品</th>\n' +
            '                                        <th style="min-width: 100px;" class="t_Left">\n' +
            '                                            <span>磨损度<i class="icon icon_order"></i></span>\n' +
            '                                        </th>\n' +
            '                                        <th style="min-width: 120px;" class="t_Left">\n' +
            '                                            <span>卖家<i class="icon icon_order"></i></span>\n' +
            '                                        </th>\n' +
            '                                        <th style="min-width: 100px;" class="t_Left">\n' +
            '                                            <span>价格<i class="icon icon_order"></i></span>\n' +
            '                                        </th>\n' +
            '                                        <th width="220" class="t_Left">操作</th>\n' +
            '                                    </tr>'
        for (let i = 0; i < sellDataLength; i++) {
            tableSellDataStr += '<tr class="selling"><td></td>\n' +
                '                                        <td class="img_td">\n' +
                '                                            <div class="pic-cont item-detail-img"\n' +
                '                                                 style="display: flex;background-image: url(https://buff.163.com/static/images/item_bg.png); background-position:center;">\n' +
                '                                                <img class=""\n' +
                '                                                     src="' + dataList[i].iconUrl + '"\n' +
                '                                                     width="72" height="48"\n' +
                '                                                     style="object-fit:contain;  max-width:80%; margin:auto;max-height:80% ">\n' +
                '                                            </div>\n' +
                '                                        </td>\n' +
                '                                        <td class="t_Left">\n' +
                '                                            <div class="name-cont wear">\n' +
                '                                                <div class="csgo_value">\n' +
                '                                                    <div class="wear-value">磨损: ' + dataList[i].paintwear + '</div>\n' +
                '                                                    <div class="wear-pointer">\n' +
                '                                                        <div class="wear-pointer-icon"\n' +
                '                                                             style="left: ' + parseFloat(dataList[i].paintwear) * 100 + '%"></div>\n' +
                '                                                    </div>\n' +
                '                                                    <div class="progress" style="margin-bottom: 5px;">\n' +
                '                                                        <div class="progress-bar progress-bar-fn" style="width: 7%;"\n' +
                '                                                             title="崭新出厂"></div>\n' +
                '                                                        <div class="progress-bar progress-bar-success"\n' +
                '                                                             style="width: 8%;"\n' +
                '                                                             title="略有磨损"></div>\n' +
                '                                                        <div class="progress-bar progress-bar-warning"\n' +
                '                                                             style="width: 23%;"\n' +
                '                                                             title="久经沙场"></div>\n' +
                '                                                        <div class="progress-bar progress-bar-danger" style="width: 7%;"\n' +
                '                                                             title="破损不堪"></div>\n' +
                '                                                        <div class="progress-bar progress-bar-bs" style="width: 55%;"\n' +
                '                                                             title="战痕累累"></div>\n' +
                '                                                    </div>\n' +
                '                                                </div>\n' +
                '                                            </div>\n' +
                '                                        </td>\n' +
                '                                        <td class="t_Left ">\n' +
                '                                            <a href="javascript:void(0)"\n' +
                '                                               class="j_shoptip_handler">\n' +
                '                                                <img src="' + dataList[i].avatar + '"\n' +
                '                                                     width="30" height="30" class="user-thum">\n' +
                '                                                ' + dataList[i].nickname + '\n' +
                '                                            </a>\n' +
                '                                        </td>\n' +
                '                                        <td class="t_Left">\n' +
                '                                            <div style="display: table-cell;">\n' +
                '                                                <strong class="f_Strong">￥' + dataList[i].price + '</strong>\n' +
                '                                                <p class="hide-cny"><span class="c_Gray f_12px">(￥' + dataList[i].price + ')</span></p>\n' +
                '                                            </div>\n' +
                '                                            <div style="display: table-cell; vertical-align: middle; padding-left: 3px;">\n' +
                '                                                <i class="icon icon_payment_alipay" style="margin-top:-3px;"\n' +
                '                                                   title="支持BUFF余额-支付宝"></i>\n' +
                '                                                <i class="icon icon_payment_others" style="margin-top:-3px;"\n' +
                '                                                   title="支持BUFF余额-银行卡"></i>\n' +
                '                                            </div>\n' +
                '                                        </td>\n' +
                '                                        <td class="t_Left">\n' +
                '                                            <a href="javascript:void(0)" class="i_Btn i_Btn_mid2 btn-buy-order" onclick="ackPay('+dataList[i].id+','+dataList[i].price+')" data-bs-toggle="modal" data-bs-target="#modal-simple">购买</a>\n' +
                '                                        </td>\n' +
                '                                    </tr>'
        }
        $(".list_tb_csgo")[0].innerHTML = tableSellDataStr;
        var pageInfo = data.data;
        var pageDataStr = ""
        if (pageInfo.isFirstPage)
            pageDataStr += '<li class="disabled"><span class="current prev">上一页</span></li>'
        else
            pageDataStr += '<li><a href="javascript:void(0)" onclick="toPageNum(' + pageInfo.prePage + ')" class="page-link prev">上一页</a></li>'

        for (let currentPageNum = 1; currentPageNum <= pageInfo.navigatepageNums.length; currentPageNum++) {
            if (pageInfo.pageNum == currentPageNum) {
                currentPage = currentPageNum;
                pageDataStr += '<li class="active"><span class="current">' + currentPageNum + '</span></li>';
            } else
                pageDataStr += '<li><a href="javascript:void(0)" onclick="toPageNum(' + currentPageNum + ')" className="page-link">' + currentPageNum + '</a></li>'
        }
        if (pageInfo.isLastPage)
            pageDataStr += '<li class="disabled"><span class="current next">下一页</span></li>'
        else
            pageDataStr += '<li><a href="javascript:void(0)" onclick="toPageNum(' + pageInfo.nextPage + ')" class="page-link next">下一页</a></li>'
        $('.simple-pagination ul')[0].innerHTML = pageDataStr;
    }

    function toPageNum(pageNum) {
        askForData(pageNum, wearZoneParam, conditionZoneParam)
    }

    function wearZone() {
        var eachWearZone = $(".wear-zone a");
        for (let i = 0; i < eachWearZone.length; i++) {
            eachWearZone[i].onclick = function () {
                if (this.innerText == "不限")
                    $("#grindZone button")[0].innerText = "磨损区间";
                else
                    $("#grindZone button")[0].innerText = this.innerText;
                wearZoneParam = this.innerText;
                askForData(currentPage, wearZoneParam, conditionZoneParam);
            };
        }
    }

    function conditionZone() {
        var eachConditionZone = $(".condition-zone a");
        for (let i = 0; i < eachConditionZone.length; i++) {
            eachConditionZone[i].onclick = function () {
                if (this.innerText == "默认")
                    $("#conditionZone button")[0].innerText = "默认";
                else
                    $("#conditionZone button")[0].innerText = this.innerText;
                conditionZoneParam = this.innerText;
                askForData(currentPage, wearZoneParam, conditionZoneParam);
            };
        }

    }
    function ackPay(id,price){
        var userId = $("#user_detail")[0].getAttribute("data-userid");
        var accountBalance = 0;
        $.ajax({
            url: "/user/getUserById/" + userId,
            type: "GET",
            // 定义发送请求的数据格式为JSON字符串
            contentType: "application/json;charset=UTF-8",
            //定义回调响应的数据格式为JSON字符串，该属性可以省略
            dataType: "json",
            //成功响应的结果
            success: function (data) {
                if (data.code == 200) {
                    console.log(data)
                    accountBalance = data.data.balance;
                    $("h5.f_16px > span.c_Blue")[0].innerText = '￥ ' + accountBalance;
                    if(accountBalance < price){
                        console.log(accountBalance)
                        console.log(price)
                        var payTagStr = '<a href="javascript:void(0)" class="i_Btn pay-btn" onclick="toRecharge()">前往充值</a>'
                        $(".t_Center")[2].innerHTML = payTagStr;
                    }
                    console.log(id)
                    console.log(price);
                    $(".total_price")[0].innerText = '¥'  + price;
                    $(".total_price_custom")[0].innerText = '¥'  + price;
                }
            }
        })

    }
    function toRecharge(){
        location.href = "/toAccountPage";
    }
    // 略磨
    function wearZoneForEachPaintWear(data) {
        var grindDataStr = "";
        console.log(wearZoneParam);
        if (wearZoneParam == "不限")
            wearZoneParam = "磨损区间"
        grindDataStr += '<button data-bs-toggle="dropdown" type="button"\n' +
            '                                                    class="btn dropdown-toggle-split" onclick="wearZone()">' + (wearZoneParam != null && wearZoneParam != '' ? wearZoneParam : '磨损区间') + '\n' +
            '                                            </button>\n' +
            '                                            <div class="dropdown-menu wear-zone">\n' +
            '                                                <a class="w-50 dropdown-item" href="javascript:void(0)">\n' +
            '                                                    不限\n' +
            '                                                </a>\n';
        for (let i = 0; i < data.length; i++) {
            grindDataStr += '<a class="w-50 dropdown-item" href="javascript:void(0)">'+data[i]+'</a>'
        }
        grindDataStr += '</div>'
        $("#grindZone")[0].innerHTML = grindDataStr;
    }

</script>
